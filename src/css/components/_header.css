/* ==========================================================================
   Header Component
   Fixed header with Matrix theme styling
   ========================================================================== */

/* ==========================================================================
   Header Container
   ========================================================================== */

header {
    background: rgba(26, 26, 26, 0.95);
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
    padding: 1rem 0;
    position: fixed;
    width: 100%;
    z-index: var(--z-modal);
    top: 0;
    transition: transform var(--duration-base) var(--ease-out), 
                box-shadow var(--duration-base) ease;
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
}

/* Enhanced shadow when scrolled */
header.scrolled {
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.8);
}

/* Header inner container */
header .container {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 20px;
    max-width: var(--container-max);
    margin: 0 auto;
}

/* ==========================================================================
   Header Title Section
   ========================================================================== */

.header-title {
    display: flex;
    align-items: baseline;
    gap: 15px;
    flex-wrap: wrap;
}

header h1 {
    font-size: clamp(1.5rem, 1.3rem + 1vw, 1.75rem);
    margin: 0;
    font-weight: 400;
    color: var(--text-primary);
    text-shadow: none;
    transition: color var(--duration-base) ease;
    font-family: var(--font-primary);
    letter-spacing: var(--letter-spacing-wide);
}

header h1:hover {
    color: var(--accent-color);
}

header h3 {
    font-size: clamp(1.15rem, 1.1rem + 0.5vw, 1.4rem);
    margin: 0;
    opacity: 0.9;
    font-weight: 400;
    color: var(--text-secondary);
    font-family: var(--font-primary);
    text-shadow: none;
    letter-spacing: 0.05em;
}

/* ==========================================================================
   Header States
   ========================================================================== */

/* Hidden header state (for scroll behavior) */
header.header-hidden {
    transform: translateY(-100%);
    transition: transform 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);
}

/* Visible header state */
header:not(.header-hidden) {
    transform: translateY(0);
    transition: transform 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);
}

/* Transparent header for hero sections */
header.transparent {
    background: transparent;
    box-shadow: none;
}

header.transparent.scrolled {
    background: rgba(26, 26, 26, 0.95);
}

/* ==========================================================================
   Mobile Styles
   ========================================================================== */

@media screen and (max-width: 768px) {
    header {
        padding: 0.75rem 0;
    }

    /* Enhanced mobile hide behavior - faster animation */
    header.header-hidden {
        transform: translateY(-100%);
        transition: transform 0.2s cubic-bezier(0.4, 0.0, 0.2, 1);
    }

    header:not(.header-hidden) {
        transform: translateY(0);
        transition: transform 0.2s cubic-bezier(0.4, 0.0, 0.2, 1);
    }

    header .container {
        padding: 0 1rem;
        gap: 1rem;
    }

    .header-title {
        flex: 1;
        gap: 0;
        flex-direction: column;
        align-items: flex-start;
        min-width: 0;  /* Allow flex item to shrink */
    }

    header h1 {
        font-size: 1.5rem;
        white-space: nowrap;  /* Prevent wrapping */
        overflow: hidden;
        text-overflow: ellipsis;
        margin: 0;
        line-height: 1.2;
    }

    header h3 {
        display: none;  /* Hide subtitle on mobile for cleaner look */
    }

    /* Ensure mobile navigation menu doesn't interfere with hide behavior */
    nav ul.mobile-open {
        /* Keep menu visible even when header is hidden */
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        z-index: calc(var(--z-modal) + 1);
        background: rgba(26, 26, 26, 0.98);
        backdrop-filter: blur(15px);
        -webkit-backdrop-filter: blur(15px);
    }
}

@media screen and (max-width: 480px) {
    header h1 {
        font-size: 1.25rem;
        letter-spacing: -0.5px;  /* Tighten letter spacing to save space */
    }
    
    header .container {
        padding: 0 0.75rem;
        gap: 0.5rem;
    }
    
    .header-title {
        min-width: 0;
        flex-shrink: 1;
    }
    
    .menu-toggle {
        width: 40px;
        height: 40px;
    }
}

/* ==========================================================================
   Accessibility
   ========================================================================== */

/* Skip to main content link */
.skip-to-main {
    position: absolute;
    top: -100px;
    left: 0;
    background: var(--matrix-green);
    color: #000;
    padding: var(--space-sm) var(--space-md);
    text-decoration: none;
    z-index: calc(var(--z-modal) + 1);
    border-radius: 0 0 var(--radius-base) 0;
}

.skip-to-main:focus {
    top: 0;
}

/* ==========================================================================
   Header Loading State
   ========================================================================== */

header.loading {
    opacity: 0;
    transform: translateY(-20px);
}

header.loaded {
    opacity: 1;
    transform: translateY(0);
    transition: opacity var(--duration-slow) var(--ease-out),
                transform var(--duration-slow) var(--ease-out);
}